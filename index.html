<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Explorer - Machine Learning Interactivo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .animate-pulse-slow {
            animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        .tree-node {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .tree-node:hover {
            transform: scale(1.05);
        }
        
        .maze-cell {
            transition: all 0.3s ease;
            border: 1px solid #374151;
        }
        
        .maze-cell:hover {
            transform: scale(1.02);
        }
        
        .progress-bar {
            transition: width 0.5s ease;
        }
        
        .particle {
            position: absolute;
            background: rgba(139, 92, 246, 0.3);
            border-radius: 50%;
            pointer-events: none;
            animation: particle-float 8s linear infinite;
        }
        
        @keyframes particle-float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }
        
        .code-block {
            background: #1f2937;
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
        }
        
        .highlight-green { color: #10b981; }
        .highlight-blue { color: #3b82f6; }
        .highlight-purple { color: #8b5cf6; }
        .highlight-yellow { color: #f59e0b; }
        .highlight-red { color: #ef4444; }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .tab-button {
            transition: all 0.3s ease;
        }
        
        .tab-button.active {
            background: rgba(59, 130, 246, 0.2);
            border-color: #3b82f6;
        }

        .rl-tab-content {
            display: none;
        }
        
        .rl-tab-content.active {
            display: block;
        }
        
        .rl-tab-button {
            transition: all 0.3s ease;
        }
        
        .rl-tab-button.active {
            background: rgba(139, 92, 246, 0.2);
            border-color: #8b5cf6;
        }
        
        .tree-container {
            max-height: 600px;
            overflow: auto;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .tree-container::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }
        
        .tree-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
        }
        
        .tree-container::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.6);
            border-radius: 6px;
        }
        
        .tree-container::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.8);
        }
        
        .feature-control {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .feature-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #374151;
            outline: none;
            -webkit-appearance: none;
        }
        
        .feature-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
        }
        
        .feature-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: none;
        }
        
        .depth-navigation {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .depth-button {
            padding: 0.5rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.875rem;
        }
        
        .depth-button:hover {
            background: rgba(59, 130, 246, 0.3);
        }
        
        .depth-button.active {
            background: rgba(59, 130, 246, 0.5);
            border-color: #3b82f6;
        }
        
        .prediction-result {
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            margin-top: 1rem;
        }
        
        .prediction-confidence {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            gap: 0.5rem;
        }
        
        .confidence-bar {
            height: 8px;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .decision-path-highlight {
            stroke: #fbbf24 !important;
            stroke-width: 4px !important;
        }
        
        .decision-node-highlight {
            fill: #f59e0b !important;
        }
        
        .node-info-enhanced {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .resource-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .resource-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .resource-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 0.75rem;
            padding: 0.5rem;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .resource-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .resource-bullet {
            color: #10b981;
            font-weight: bold;
            margin-right: 0.5rem;
            margin-top: 0.125rem;
        }

        .loading-spinner {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 2px solid #3b82f6;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 8px;
            padding: 1rem;
            color: #fca5a5;
            margin-top: 1rem;
        }

        .success-message {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 8px;
            padding: 1rem;
            color: #6ee7b7;
            margin-top: 1rem;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white min-h-screen">
    <!-- PartÃ­culas de fondo -->
    <div id="particles-container" class="fixed inset-0 overflow-hidden pointer-events-none" style="z-index: -1;"></div>

    <!-- Header -->
    <header class="glass-effect border-b border-white/20 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <i data-lucide="brain" class="w-8 h-8 mr-3 text-cyan-400"></i>
                    <h1 class="text-2xl font-bold text-white">ML Explorer</h1>
                    <div class="ml-4 px-3 py-1 bg-green-500/20 border border-green-500/30 rounded-full text-xs text-green-400">
                        <span id="server-status">ð´ Desconectado</span>
                    </div>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="#inicio" class="text-gray-300 hover:text-cyan-400 transition-colors">Inicio</a>
                    <a href="#decision-trees" class="text-gray-300 hover:text-cyan-400 transition-colors">Ãrboles</a>
                    <a href="#reinforcement" class="text-gray-300 hover:text-cyan-400 transition-colors">RL</a>
                    <a href="#python-code" class="text-gray-300 hover:text-cyan-400 transition-colors">Python</a>
                    <a href="#comparacion" class="text-gray-300 hover:text-cyan-400 transition-colors">ComparaciÃ³n</a>
                    <a href="#recursos" class="text-gray-300 hover:text-cyan-400 transition-colors">Recursos</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="inicio" class="relative min-h-screen flex items-center justify-center px-4">
        <div class="text-center max-w-4xl mx-auto animate-float">
            <div class="mb-8">
                <i data-lucide="brain" class="w-20 h-20 mx-auto mb-6 text-cyan-400 animate-pulse-slow"></i>
                <h1 class="text-6xl md:text-8xl font-bold mb-6 bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
                    ML Explorer
                </h1>
                <p class="text-xl md:text-2xl text-gray-300 mb-4">Descubre el fascinante mundo del Machine Learning</p>
                <p class="text-lg text-gray-400 mb-8 max-w-2xl mx-auto">
                    Una experiencia interactiva para entender Ãrboles de DecisiÃ³n y Reinforcement Learning con servidor Python
                </p>
                <div class="inline-block bg-white/10 backdrop-blur-lg border border-white/20 rounded-full px-6 py-2 mb-8">
                    <span class="text-lg">Powered by Python Backend ð</span>
                </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 justify-center mb-12">
                <button onclick="scrollToSection('decision-trees')" class="bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white px-8 py-4 text-lg rounded-lg transition-all duration-300 transform hover:scale-105">
                    <i data-lucide="tree-pine" class="inline w-5 h-5 mr-2"></i>
                    Ãrboles de DecisiÃ³n
                </button>
                <button onclick="scrollToSection('reinforcement')" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-8 py-4 text-lg rounded-lg transition-all duration-300 transform hover:scale-105">
                    <i data-lucide="target" class="inline w-5 h-5 mr-2"></i>
                    Reinforcement Learning
                </button>
                <button onclick="scrollToSection('python-code')" class="bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-8 py-4 text-lg rounded-lg transition-all duration-300 transform hover:scale-105">
                    <i data-lucide="code" class="inline w-5 h-5 mr-2"></i>
                    CÃ³digo Python
                </button>
            </div>

            <div class="animate-bounce">
                <i data-lucide="chevron-down" class="w-8 h-8 mx-auto text-gray-400"></i>
            </div>
        </div>
    </section>

    <!-- Introduction Section -->
    <section class="py-20 px-4 relative">
        <div class="max-w-6xl mx-auto">
            <div class="glass-effect rounded-2xl p-8">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-white mb-4">Â¿QuÃ© es Machine Learning?</h2>
                    <p class="text-lg text-gray-300 mb-6 max-w-4xl mx-auto">
                        El Machine Learning es una rama de la inteligencia artificial que permite a las mÃ¡quinas aprender y
                        tomar decisiones sin ser programadas explÃ­citamente para cada situaciÃ³n especÃ­fica.
                    </p>
                </div>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="text-center p-6 glass-effect rounded-xl">
                        <i data-lucide="lightbulb" class="w-12 h-12 mx-auto mb-4 text-yellow-400"></i>
                        <h3 class="text-xl font-semibold mb-2">Aprende</h3>
                        <p class="text-gray-400">De datos y patrones</p>
                    </div>
                    <div class="text-center p-6 glass-effect rounded-xl">
                        <i data-lucide="zap" class="w-12 h-12 mx-auto mb-4 text-cyan-400"></i>
                        <h3 class="text-xl font-semibold mb-2">Predice</h3>
                        <p class="text-gray-400">Resultados futuros</p>
                    </div>
                    <div class="text-center p-6 glass-effect rounded-xl">
                        <i data-lucide="target" class="w-12 h-12 mx-auto mb-4 text-purple-400"></i>
                        <h3 class="text-xl font-semibold mb-2">Optimiza</h3>
                        <p class="text-gray-400">Decisiones automÃ¡ticamente</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Decision Trees Section -->
    <section id="decision-trees" class="py-20 px-4 relative">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-12">
                <i data-lucide="tree-pine" class="w-16 h-16 mx-auto mb-6 text-green-400"></i>
                <h2 class="text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent">
                    Ãrboles de DecisiÃ³n Interactivos
                </h2>
                <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                    Explora cÃ³mo las caracterÃ­sticas de las flores influyen en las decisiones del Ã¡rbol con procesamiento en servidor Python.
                </p>
            </div>

            <div class="glass-effect rounded-2xl p-8">
                <!-- Tabs -->
                <div class="flex flex-wrap justify-center mb-8 bg-white/10 rounded-lg p-1">
                    <button class="tab-button px-6 py-3 rounded-lg text-white transition-all duration-300" onclick="showTab('dt-theory')">
                        <i data-lucide="book-open" class="inline w-4 h-4 mr-2"></i>TeorÃ­a                    
                    </button>
                    <button class="tab-button active px-6 py-3 rounded-lg text-white transition-all duration-300" onclick="showTab('dt-interactive')">
                        <i data-lucide="sliders" class="inline w-4 h-4 mr-2"></i>Interactivo
                    </button>
                    <button class="tab-button px-6 py-3 rounded-lg text-white transition-all duration-300" onclick="showTab('dt-code')">
                        <i data-lucide="code" class="inline w-4 h-4 mr-2"></i>CÃ³digo
                    </button>
                </div>

                <!-- Theory Tab -->
                <div id="dt-theory" class="tab-content">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-2xl font-bold mb-4 text-green-400">Conceptos Clave</h3>
                            <div class="space-y-4">
                                <div class="p-4 bg-white/5 rounded-lg">
                                    <h4 class="font-semibold text-cyan-400 mb-2">ð³ Nodo RaÃ­z</h4>
                                    <p class="text-gray-300">El punto de inicio donde se hace la primera pregunta mÃ¡s importante<br>
                                        â¢ Es el punto de inicio con TODOS los datos.<br>
                                </div>
                                <div class="p-4 bg-white/5 rounded-lg">
                                    <h4 class="font-semibold text-cyan-400 mb-2">ð Nodos Internos</h4>
                                    <p class="text-gray-300">Puntos de decisiÃ³n que dividen los datos segÃºn una caracterÃ­stica<br>
                                        â¢ Reciben datos del nodo padre y los dividen en 2 grupos<br>
                                 
                                    </p>
                                </div>
                                <div class="p-4 bg-white/5 rounded-lg">
                                    <h4 class="font-semibold text-cyan-400 mb-2">ð Hojas</h4>
                                    <p class="text-gray-300">Nodos finales que contienen la predicciÃ³n final<br>
                                         â¢ No se dividen mÃ¡s - son el final del camino<br>
                                    </p>
                                </div>
                                <div class="p-4 bg-white/5 rounded-lg">
                                    <h4 class="font-semibold text-cyan-400 mb-2">ð EntropÃ­a - Medida de Desorden</h4>
                                        <p class="text-gray-300">
                                            <strong>Â¿QuÃ© tan difÃ­cil es predecir la clase de un dato?</strong><br><br>
                                            Imagina una caja de frutas:<br>
                                            â¢ Si solo hay manzanas â EntropÃ­a = 0 (puro)<br>
                                            â¢ Si hay manzanas, peras y naranjas mezcladas â EntropÃ­a alta<br>
                                            â¢ El Ã¡rbol busca crear cajas mÃ¡s "puras" en cada divisiÃ³n
                                        </p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold mb-4 text-green-400">Â¿CÃ³mo Funciona?</h3>
                            <div class="space-y-4 text-gray-300">
                                <p><strong class="text-white">1. AnÃ¡lisis:</strong> Examina todas las caracterÃ­sticas disponibles</p>
                                <p><strong class="text-white">2. SelecciÃ³n:</strong> Elige la caracterÃ­stica que mejor separa las clases</p>
                                <p><strong class="text-white">3. DivisiÃ³n:</strong> Crea ramas basadas en un umbral Ã³ptimo</p>
                                <p><strong class="text-white">4. RecursiÃ³n:</strong> Repite el proceso en cada rama</p>
                                <p><strong class="text-white">5. Parada:</strong> Se detiene cuando alcanza pureza o profundidad mÃ¡xima</p>
                                <p><strong class="text-white">6. PredicciÃ³n:</strong> Sigue el camino desde la raÃ­z hasta una hoja</p>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Interactive Tab -->
                <div id="dt-interactive" class="tab-content active">
                    
                    <!-- AQUÃ VA LA DESCRIPCIÃN DEL JUEGO -->
                    <div class="mb-6 p-4 bg-gray-800/50 rounded-lg border border-cyan-500/30">
                        <h3 class="text-xl font-semibold text-cyan-400 mb-3">ð® Demo Interactiva: Clasificador de Flores Iris</h3>
                        <p class="text-gray-300 mb-4">
                            Entrena tu propio Ã¡rbol de decisiÃ³n para clasificar especies de flores iris. 
                            El algoritmo aprenderÃ¡ a distinguir entre 3 especies (Setosa, Versicolor, Virginica) 
                            basÃ¡ndose en el tamaÃ±o de pÃ©talos y sÃ©palos.
                        </p>
                        <p class="text-gray-400 text-sm">
                            <strong>Â¿CÃ³mo funciona?</strong> El Ã¡rbol hace preguntas como "Â¿El pÃ©talo es > 2.5cm?" 
                            para dividir las flores en grupos cada vez mÃ¡s puros hasta poder predecir la especie.
                        </p>
                    </div>

                    <div class="grid lg:grid-cols-3 gap-8">
                        <!-- Panel de Controles -->
                        <div class="space-y-6">
                            <!-- Controles del Ãrbol -->
                            <div class="glass-effect rounded-xl p-6">
                                <h3 class="text-xl font-bold text-green-400 mb-4">Controles del Ãrbol</h3>
                                <div class="flex flex-wrap gap-4 mb-4">
                                    <button onclick="trainDecisionTree()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-all duration-300 transform hover:scale-105" id="train-tree-btn">
                                        <i data-lucide="play" class="inline w-4 h-4 mr-2"></i>Entrenar Ãrbol
                                    </button>
                                    <button onclick="resetDecisionTree()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all duration-300">
                                        <i data-lucide="rotate-ccw" class="inline w-4 h-4 mr-2"></i>Reset
                                    </button>
                                    <button onclick="shuffleData()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all duration-300">
                                        <i data-lucide="shuffle" class="inline w-4 h-4 mr-2"></i>Nuevos Datos
                                    </button>
                                </div>

                                <div class="bg-white/5 p-4 rounded-lg">
                                    <label class="text-white font-medium mb-2 block">Profundidad MÃ¡xima: <span id="depth-value">3</span></label>
                                    <input type="range" id="depth-slider" min="1" max="6" value="3" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                                </div>
                            </div>

                            <!-- CaracterÃ­sticas de la Flor -->
                            <div class="glass-effect rounded-xl p-6">
                                <h3 class="text-xl font-bold text-yellow-400 mb-4">ð¸ CaracterÃ­sticas de la Flor</h3>
                                <p class="text-gray-300 text-sm mb-4">Ajusta las caracterÃ­sticas y observa cÃ³mo cambia la predicciÃ³n:</p>
                                
                                <!-- Longitud del SÃ©palo -->
                                <div class="feature-control">
                                    <label class="text-white font-medium mb-2 block">
                                        Longitud del SÃ©palo: <span id="sepal-length-value" class="text-cyan-400">5.0</span> cm
                                    </label>
                                    <input type="range" id="sepal-length-slider" class="feature-slider" 
                                           min="4.0" max="8.0" step="0.1" value="5.0">
                                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                                        <span>4.0 cm</span>
                                        <span>8.0 cm</span>
                                    </div>
                                </div>

                                <!-- Ancho del SÃ©palo -->
                                <div class="feature-control">
                                    <label class="text-white font-medium mb-2 block">
                                        Ancho del SÃ©palo: <span id="sepal-width-value" class="text-cyan-400">3.0</span> cm
                                    </label>
                                    <input type="range" id="sepal-width-slider" class="feature-slider" 
                                           min="2.0" max="4.5" step="0.1" value="3.0">
                                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                                        <span>2.0 cm</span>
                                        <span>4.5 cm</span>
                                    </div>
                                </div>

                                <!-- Longitud del PÃ©talo -->
                                <div class="feature-control">
                                    <label class="text-white font-medium mb-2 block">
                                        Longitud del PÃ©talo: <span id="petal-length-value" class="text-cyan-400">3.0</span> cm
                                    </label>
                                    <input type="range" id="petal-length-slider" class="feature-slider" 
                                           min="1.0" max="7.0" step="0.1" value="3.0">
                                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                                        <span>1.0 cm</span>
                                        <span>7.0 cm</span>
                                    </div>
                                </div>

                                <!-- Ancho del PÃ©talo -->
                                <div class="feature-control">
                                    <label class="text-white font-medium mb-2 block">
                                        Ancho del PÃ©talo: <span id="petal-width-value" class="text-cyan-400">1.0</span> cm
                                    </label>
                                    <input type="range" id="petal-width-slider" class="feature-slider" 
                                           min="0.1" max="2.5" step="0.1" value="1.0">
                                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                                        <span>0.1 cm</span>
                                        <span>2.5 cm</span>
                                    </div>
                                </div>

                                <!-- PredicciÃ³n en Tiempo Real -->
                                <div id="prediction-result" class="prediction-result">
                                    <h4 class="text-white font-bold text-lg mb-2">ð¯ PredicciÃ³n del Ãrbol</h4>
                                    <div class="text-2xl font-bold text-white mb-2" id="predicted-species">Entrena el Ã¡rbol primero</div>
                                    <div class="text-sm text-white/80" id="prediction-path">Camino: No disponible</div>
                                    
                                    <div class="prediction-confidence">
                                        <div class="flex-1 mr-2">
                                            <div class="text-xs text-white/80 mb-1">Setosa</div>
                                            <div class="bg-white/20 rounded-full h-2">
                                                <div id="setosa-confidence" class="confidence-bar bg-red-400" style="width: 0%"></div>
                                            </div>
                                        </div>
                                        <div class="flex-1 mx-1">
                                            <div class="text-xs text-white/80 mb-1">Versicolor</div>
                                            <div class="bg-white/20 rounded-full h-2">
                                                <div id="versicolor-confidence" class="confidence-bar bg-blue-400" style="width: 0%"></div>
                                            </div>
                                        </div>
                                        <div class="flex-1 ml-2">
                                            <div class="text-xs text-white/80 mb-1">Virginica</div>
                                            <div class="bg-white/20 rounded-full h-2">
                                                <div id="virginica-confidence" class="confidence-bar bg-purple-400" style="width: 0%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- VisualizaciÃ³n del Ãrbol -->
                        <div class="lg:col-span-2 space-y-6">
                            <div class="glass-effect rounded-xl p-6">
                                <h3 class="text-xl font-bold text-white mb-4">ð³ VisualizaciÃ³n del Ãrbol</h3>
                              
                                <!-- AQUÃ VAN LOS PARÃMETROS -->
                                <div class="mb-4 p-3 bg-gray-700/50 rounded-lg">
                                    <h4 class="font-semibold text-cyan-400 mb-2">âï¸ ParÃ¡metros de Entrenamiento</h4>
                                    <div class="space-y-2 text-sm text-gray-300">
                                        <p><strong>Profundidad MÃ¡xima:</strong> CuÃ¡ntos niveles puede tener el Ã¡rbol. MÃ¡s profundo = mÃ¡s complejo.</p>
                                        <p><strong>Muestras MÃ­nimas:</strong> MÃ­nimo de datos para dividir un nodo. MÃ¡s alto = Ã¡rbol mÃ¡s simple.</p>
                                    </div>
                                </div>                                
                                <!-- NavegaciÃ³n por Profundidad -->
                                <div class="depth-navigation">
                                    <span class="text-white font-medium">Mostrar hasta nivel:</span>
                                    <button class="depth-button active" onclick="showTreeDepth(1)" data-depth="1">1</button>
                                    <button class="depth-button" onclick="showTreeDepth(2)" data-depth="2">2</button>
                                    <button class="depth-button" onclick="showTreeDepth(3)" data-depth="3">3</button>
                                    <button class="depth-button" onclick="showTreeDepth(4)" data-depth="4">4</button>
                                    <button class="depth-button" onclick="showTreeDepth(5)" data-depth="5">5</button>
                                    <button class="depth-button" onclick="showTreeDepth(6)" data-depth="6">Todos</button>
                                </div>

                                <!-- Contenedor del Ãrbol con Scroll -->
                                <div class="tree-container">
                                    <svg id="tree-svg" width="100%" height="800" class="bg-gray-900/50">
                                        <text x="50%" y="50%" text-anchor="middle" fill="#9ca3af" font-size="16">
                                            Haz clic en "Entrenar Ãrbol" para comenzar
                                        </text>
                                    </svg>
                                </div>
                                
                                <div class="mt-4 flex flex-wrap gap-2 text-sm">
                                    <span class="px-2 py-1 bg-blue-600/20 border border-blue-500/30 rounded text-blue-400">ðµ Nodo Interno</span>
                                    <span class="px-2 py-1 bg-green-600/20 border border-green-500/30 rounded text-green-400">ð¢ Hoja</span>
                                    <span class="px-2 py-1 bg-yellow-600/20 border border-yellow-500/30 rounded text-yellow-400">ð¡ Camino de PredicciÃ³n</span>
                                </div>
                                
                                <p class="text-gray-300 text-sm mt-2">ð¡ Haz clic en los nodos para ver informaciÃ³n detallada</p>
                                <p class="text-gray-300 text-sm">ð¯ Los nodos resaltados muestran el camino de tu predicciÃ³n actual</p>
                            </div>

                            <!-- Progreso del entrenamiento -->
                            <div id="training-progress" class="bg-white/5 p-4 rounded-lg hidden">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-white">Entrenando en servidor Python...</span>
                                    <span class="text-cyan-400" id="progress-text">0%</span>
                                </div>
                                <div class="w-full bg-gray-700 rounded-full h-2">
                                    <div id="progress-bar" class="bg-gradient-to-r from-cyan-500 to-blue-500 h-2 rounded-full progress-bar" style="width: 0%"></div>
                                </div>
                            </div>

                            <!-- InformaciÃ³n del Nodo -->
                            <div id="node-info" class="node-info-enhanced hidden">
                                <h4 class="text-cyan-400 font-semibold mb-4">ð InformaciÃ³n del Nodo</h4>
                                <div id="node-details"></div>
                            </div>

                            <!-- Mensajes de error/Ã©xito -->
                            <div id="dt-messages"></div>
                        </div>
                    </div>
                </div>

                <!-- Code Tab -->
                <div id="dt-code" class="tab-content">
                    <div class="space-y-6">
                        <div class="text-center mb-8">
                            <i data-lucide="code" class="w-16 h-16 mx-auto mb-6 text-green-400"></i>
                            <h2 class="text-3xl font-bold mb-4 bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent">
                                ImplementaciÃ³n en Python (Servidor)
                            </h2>
                            <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                                El cÃ³digo Python se ejecuta en el servidor y se comunica con el frontend via API REST
                            </p>
                        </div>

                        <div class="glass-effect rounded-2xl p-8">
                            <div class="space-y-8">
                                <!-- Ejemplo de API Call -->
                                <div>
                                    <h3 class="text-2xl font-bold text-green-400 mb-4">1. Llamada a la API para Entrenar</h3>
                                    <div class="code-block">
<pre><span class="highlight-green">// Frontend JavaScript - Llamada al servidor Python</span>
<span class="highlight-blue">async function</span> <span class="highlight-yellow">trainDecisionTree</span>() {
    <span class="highlight-blue">const</span> <span class="highlight-purple">response</span> = <span class="highlight-blue">await</span> <span class="highlight-yellow">fetch</span>(<span class="highlight-red">'http://localhost:5000/api/train-decision-tree'</span>, {
        <span class="highlight-purple">method</span>: <span class="highlight-red">'POST'</span>,
        <span class="highlight-purple">headers</span>: {
            <span class="highlight-red">'Content-Type'</span>: <span class="highlight-red">'application/json'</span>
        },
        <span class="highlight-purple">body</span>: <span class="highlight-yellow">JSON</span>.<span class="highlight-purple">stringify</span>({
            <span class="highlight-purple">max_depth</span>: <span class="highlight-yellow">parseInt</span>(<span class="highlight-yellow">document</span>.<span class="highlight-purple">getElementById</span>(<span class="highlight-red">'depth-slider'</span>).<span class="highlight-purple">value</span>),
            <span class="highlight-purple">session_id</span>: <span class="highlight-red">'user-session-123'</span>
        })
    });
    
    <span class="highlight-blue">const</span> <span class="highlight-purple">data</span> = <span class="highlight-blue">await</span> <span class="highlight-purple">response</span>.<span class="highlight-purple">json</span>();
    
    <span class="highlight-blue">if</span> (<span class="highlight-purple">data</span>.<span class="highlight-purple">success</span>) {
        <span class="highlight-green">// Renderizar el Ã¡rbol recibido del servidor</span>
        <span class="highlight-yellow">renderDecisionTree</span>(<span class="highlight-purple">data</span>.<span class="highlight-purple">tree</span>);
    }
}</pre>
                                    </div>
                                    <p class="text-gray-300 mt-4">
                                        <strong>ExplicaciÃ³n:</strong> El frontend envÃ­a una peticiÃ³n POST al servidor Python 
                                        con los parÃ¡metros de entrenamiento. El servidor procesa los datos y devuelve el Ã¡rbol entrenado.
                                    </p>
                                </div>

                                <!-- Servidor Python -->
                                <div>
                                    <h3 class="text-2xl font-bold text-green-400 mb-4">2. Endpoint del Servidor Python</h3>
                                    <div class="code-block">
<pre><span class="highlight-green"># server.py - Endpoint para entrenar Ã¡rbol de decisiÃ³n</span>
<span class="highlight-blue">@app.route</span>(<span class="highlight-red">'/api/train-decision-tree'</span>, <span class="highlight-purple">methods</span>=[<span class="highlight-red">'POST'</span>])
<span class="highlight-blue">def</span> <span class="highlight-yellow">train_decision_tree</span>():
    <span class="highlight-blue">try</span>:
        <span class="highlight-purple">request_data</span> = <span class="highlight-purple">request</span>.<span class="highlight-purple">get_json</span>()
        <span class="highlight-purple">max_depth</span> = <span class="highlight-purple">request_data</span>.<span class="highlight-purple">get</span>(<span class="highlight-red">'max_depth'</span>, <span class="highlight-green">3</span>)
        <span class="highlight-purple">session_id</span> = <span class="highlight-purple">request_data</span>.<span class="highlight-purple">get</span>(<span class="highlight-red">'session_id'</span>, <span class="highlight-red">'default'</span>)
        
        <span class="highlight-green"># Generar datos de entrenamiento</span>
        <span class="highlight-purple">iris_data</span> = <span class="highlight-yellow">generate_iris_data</span>()
        <span class="highlight-purple">X</span> = [<span class="highlight-purple">item</span>[<span class="highlight-red">'features'</span>] <span class="highlight-blue">for</span> <span class="highlight-purple">item</span> <span class="highlight-blue">in</span> <span class="highlight-purple">iris_data</span>]
        <span class="highlight-purple">y</span> = [<span class="highlight-purple">item</span>[<span class="highlight-red">'label'</span>] <span class="highlight-blue">for</span> <span class="highlight-purple">item</span> <span class="highlight-blue">in</span> <span class="highlight-purple">iris_data</span>]
        
        <span class="highlight-green"># Crear y entrenar el Ã¡rbol</span>
        <span class="highlight-purple">tree</span> = <span class="highlight-yellow">DecisionTreeClassifier</span>(<span class="highlight-purple">max_depth</span>=<span class="highlight-purple">max_depth</span>)
        <span class="highlight-purple">tree</span>.<span class="highlight-purple">fit</span>(<span class="highlight-purple">X</span>, <span class="highlight-purple">y</span>)
        
        <span class="highlight-green"># Guardar el Ã¡rbol en memoria del servidor</span>
        <span class="highlight-purple">decision_trees</span>[<span class="highlight-purple">session_id</span>] = <span class="highlight-purple">tree</span>
        
        <span class="highlight-blue">return</span> <span class="highlight-yellow">jsonify</span>({
            <span class="highlight-red">'success'</span>: <span class="highlight-blue">True</span>,
            <span class="highlight-red">'tree'</span>: <span class="highlight-purple">tree</span>.<span class="highlight-purple">root</span>.<span class="highlight-purple">to_dict</span>() <span class="highlight-blue">if</span> <span class="highlight-purple">tree</span>.<span class="highlight-purple">root</span> <span class="highlight-blue">else</span> <span class="highlight-blue">None</span>,
            <span class="highlight-red">'session_id'</span>: <span class="highlight-purple">session_id</span>
        })
    
    <span class="highlight-blue">except</span> <span class="highlight-yellow">Exception</span> <span class="highlight-blue">as</span> <span class="highlight-purple">e</span>:
        <span class="highlight-blue">return</span> <span class="highlight-yellow">jsonify</span>({
            <span class="highlight-red">'success'</span>: <span class="highlight-blue">False</span>,
            <span class="highlight-red">'error'</span>: <span class="highlight-purple">str</span>(<span class="highlight-purple">e</span>)
        }), <span class="highlight-green">500</span></pre>
                                    </div>
                                    <p class="text-gray-300 mt-4">
                                        <strong>ExplicaciÃ³n:</strong> El servidor recibe la peticiÃ³n, genera datos sintÃ©ticos de Iris, 
                                        entrena el Ã¡rbol de decisiÃ³n con los parÃ¡metros especificados y devuelve la estructura del Ã¡rbol 
                                        serializada en JSON.
                                    </p>
                                </div>

                                <!-- PredicciÃ³n -->
                                <div>
                                    <h3 class="text-2xl font-bold text-green-400 mb-4">3. API de PredicciÃ³n</h3>
                                    <div class="code-block">
<pre><span class="highlight-green"># Endpoint para hacer predicciones</span>
<span class="highlight-blue">@app.route</span>(<span class="highlight-red">'/api/predict'</span>, <span class="highlight-purple">methods</span>=[<span class="highlight-red">'POST'</span>])
<span class="highlight-blue">def</span> <span class="highlight-yellow">predict</span>():
    <span class="highlight-purple">request_data</span> = <span class="highlight-purple">request</span>.<span class="highlight-purple">get_json</span>()
    <span class="highlight-purple">session_id</span> = <span class="highlight-purple">request_data</span>.<span class="highlight-purple">get</span>(<span class="highlight-red">'session_id'</span>, <span class="highlight-red">'default'</span>)
    <span class="highlight-purple">features</span> = <span class="highlight-purple">request_data</span>.<span class="highlight-purple">get</span>(<span class="highlight-red">'features'</span>)
    
    <span class="highlight-blue">if</span> <span class="highlight-purple">session_id</span> <span class="highlight-blue">not in</span> <span class="highlight-purple">decision_trees</span>:
        <span class="highlight-blue">return</span> <span class="highlight-yellow">jsonify</span>({<span class="highlight-red">'error'</span>: <span class="highlight-red">'No trained tree found'</span>}), <span class="highlight-green">400</span>
    
    <span class="highlight-purple">tree</span> = <span class="highlight-purple">decision_trees</span>[<span class="highlight-purple">session_id</span>]
    <span class="highlight-purple">prediction</span> = <span class="highlight-purple">tree</span>.<span class="highlight-purple">predict_sample</span>(<span class="highlight-purple">features</span>)
    <span class="highlight-purple">decision_path</span> = <span class="highlight-purple">tree</span>.<span class="highlight-purple">get_decision_path</span>(<span class="highlight-purple">features</span>)
    
    <span class="highlight-blue">return</span> <span class="highlight-yellow">jsonify</span>({
        <span class="highlight-red">'success'</span>: <span class="highlight-blue">True</span>,
        <span class="highlight-red">'prediction'</span>: <span class="highlight-purple">prediction</span>,
        <span class="highlight-red">'decision_path'</span>: <span class="highlight-purple">decision_path</span>
    })</pre>
                                    </div>
                                    <p class="text-gray-300 mt-4">
                                        <strong>ExplicaciÃ³n:</strong> Este endpoint recibe las caracterÃ­sticas de una flor y devuelve 
                                        la predicciÃ³n junto con el camino de decisiÃ³n que siguiÃ³ el Ã¡rbol para llegar a esa conclusiÃ³n.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Reinforcement Learning Section -->
    <section id="reinforcement" class="py-20 px-4 relative">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-12">
                <i data-lucide="target" class="w-16 h-16 mx-auto mb-6 text-purple-400"></i>
                <h2 class="text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                    Reinforcement Learning
                </h2>
                <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                    Un paradigma de aprendizaje donde un agente aprende a tomar decisiones Ã³ptimas a travÃ©s de la interacciÃ³n
                    con su entorno y el feedback de recompensas, procesado en servidor Python.
                </p>
            </div>

            <div class="glass-effect rounded-2xl p-8">
                <!-- Tabs -->
                <div class="flex flex-wrap justify-center mb-8 bg-white/10 rounded-lg p-1">
                    <button class="rl-tab-button active px-6 py-3 rounded-lg text-white transition-all duration-300" onclick="showRLTab('rl-theory')">
                        <i data-lucide="book-open" class="inline w-4 h-4 mr-2"></i>TeorÃ­a
                    </button>
                    <button class="rl-tab-button px-6 py-3 rounded-lg text-white transition-all duration-300" onclick="showRLTab('rl-interactive')">
                        <i data-lucide="play" class="inline w-4 h-4 mr-2"></i>Laberinto RL
                    </button>
                    <button class="rl-tab-button px-6 py-3 rounded-lg text-white transition-all duration-300" onclick="showRLTab('rl-code')">
                        <i data-lucide="code" class="inline w-4 h-4 mr-2"></i>CÃ³digo Python
                    </button>
                </div>

                <!-- Theory Tab -->
                <div id="rl-theory" class="rl-tab-content active">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-2xl font-bold mb-4 text-purple-400">Componentes Principales</h3>
                            <div class="space-y-4">
                                <div class="p-4 bg-white/5 rounded-lg">
                                    <h4 class="font-semibold text-cyan-400 mb-2">ð¤ Agente</h4>
                                    <p class="text-gray-300">El "estudiante" que toma decisiones y aprende</p>
                                </div>
                                <div class="p-4 bg-white/5 rounded-lg">
                                    <h4 class="font-semibold text-cyan-400 mb-2">ð Entorno</h4>
                                    <p class="text-gray-300">El mundo donde el agente opera y recibe feedback</p>
                                </div>
                                <div class="p-4 bg-white/5 rounded-lg">
                                    <h4 class="font-semibold text-cyan-400 mb-2">â¡ Acciones</h4>
                                    <p class="text-gray-300">Las decisiones que puede tomar el agente</p>
                                </div>
                                <div class="p-4 bg-white/5 rounded-lg">
                                    <h4 class="font-semibold text-cyan-400 mb-2">ð¯ Estados</h4>
                                    <p class="text-gray-300">Las situaciones en las que se encuentra el agente</p>
                                </div>
                                <div class="p-4 bg-white/5 rounded-lg">
                                    <h4 class="font-semibold text-cyan-400 mb-2">ð Recompensas</h4>
                                    <p class="text-gray-300">SeÃ±ales que indican quÃ© tan buena fue una acciÃ³n</p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold mb-4 text-purple-400">Proceso de Aprendizaje</h3>
                            <div class="space-y-4 text-gray-300">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold">1</div>
                                    <p><strong class="text-white">Observar</strong> el estado actual del entorno</p>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold">2</div>
                                    <p><strong class="text-white">Elegir</strong> una acciÃ³n basada en la polÃ­tica actual</p>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold">3</div>
                                    <p><strong class="text-white">Ejecutar</strong> la acciÃ³n en el entorno</p>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold">4</div>
                                    <p><strong class="text-white">Recibir</strong> recompensa y nuevo estado</p>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold">5</div>
                                    <p><strong class="text-white">Actualizar</strong> la polÃ­tica basada en la experiencia</p>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold">6</div>
                                    <p><strong class="text-white">Repetir</strong> hasta converger a la polÃ­tica Ã³ptima</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                 <!-- Interactive Tab -->
                <div id="rl-interactive" class="rl-tab-content">
                    
                    <!-- AQUÃ VA LA DESCRIPCIÃN DEL JUEGO RL -->
                    <div class="mb-6 p-4 bg-gray-800/50 rounded-lg border border-purple-500/30">
                        <h3 class="text-xl font-semibold text-purple-400 mb-3">ð® Demo Interactiva: Agente Explorador de Laberintos</h3>
                        <p class="text-gray-300 mb-4">
                            Observa cÃ³mo un agente inteligente aprende a navegar un laberinto usando Q-Learning. 
                            El agente comienza sin saber nada y gradualmente descubre la ruta Ã³ptima hacia la meta 
                            a travÃ©s de ensayo y error, recibiendo recompensas y castigos.
                        </p>
                        <p class="text-gray-400 text-sm">
                            <strong>Â¿CÃ³mo aprende?</strong> El agente explora el laberinto, recuerda quÃ© acciones 
                            funcionan mejor en cada posiciÃ³n, y mejora su estrategia con cada episodio de entrenamiento.
                        </p>
                    </div>

                    <!-- AQUÃ VAN LOS PARÃMETROS (opcional, antes de los controles) -->
                    <div class="mb-4 p-3 bg-gray-700/50 rounded-lg">
                        <h4 class="font-semibold text-purple-400 mb-2">âï¸ ParÃ¡metros de Aprendizaje</h4>
                        <div class="space-y-2 text-sm text-gray-300">
                            <p><strong>Tasa de Aprendizaje (Î±):</strong> QuÃ© tan rÃ¡pido aprende. Alto = rÃ¡pido pero inestable.</p>
                            <p><strong>Factor de Descuento (Î³):</strong> Importancia de recompensas futuras. Alto = planifica a largo plazo.</p>
                            <p><strong>Tasa de ExploraciÃ³n (Îµ):</strong> Controla si el agente prueba acciones nuevas (explorar) o usa lo que ya sabe (explotar). Alto = mÃ¡s aventurero, bajo = mÃ¡s conservador.</p>
                            <p><strong>Episodios:</strong> NÃºmero de intentos para aprender a resolver el laberinto.</p>
                        </div>
                    </div>

                    <div class="grid lg:grid-cols-2 gap-8">

                        <!-- Controles -->
                        <div class="space-y-6">
                            <div class="flex flex-wrap gap-4">
                                <button onclick="createRLAgent()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-all duration-300" id="create-agent-btn">
                                    <i data-lucide="plus" class="inline w-4 h-4 mr-2"></i>Crear Agente
                                </button>
                                <button onclick="trainRLAgent()" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-all duration-300 transform hover:scale-105" id="train-rl-btn" disabled>
                                    <i data-lucide="play" class="inline w-4 h-4 mr-2"></i>Entrenar
                                </button>
                                <button onclick="findOptimalPath()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-all duration-300" id="optimal-path-btn" disabled>
                                    <i data-lucide="target" class="inline w-4 h-4 mr-2"></i>Ruta Ãptima
                                </button>
                                <button onclick="resetRLAgent()" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-all duration-300">
                                    <i data-lucide="rotate-ccw" class="inline w-4 h-4 mr-2"></i>Reset
                                </button>
                            </div>

                            <div class="space-y-4">
                                <div>
                                    <label class="text-white font-medium mb-2 block">Tasa de Aprendizaje: <span id="lr-value">0.10</span></label>
                                    <input type="range" id="lr-slider" min="0.01" max="1" step="0.01" value="0.1" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                                </div>

                                <div>
                                    <label class="text-white font-medium mb-2 block">Factor de Descuento: <span id="df-value">0.90</span></label>
                                    <input type="range" id="df-slider" min="0.1" max="1" step="0.01" value="0.9" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                                </div>

                                <div>
                                    <label class="text-white font-medium mb-2 block">Tasa de ExploraciÃ³n: <span id="er-value">0.100</span></label>
                                    <input type="range" id="er-slider" min="0.01" max="1" step="0.01" value="0.1" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                                </div>
                            </div>

                            <!-- EstadÃ­sticas -->
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-white/5 border border-white/10 p-4 rounded-lg text-center">
                                    <div class="text-2xl font-bold text-cyan-400" id="episodes-count">0</div>
                                    <div class="text-sm text-gray-400">Episodios</div>
                                </div>
                                <div class="bg-white/5 border border-white/10 p-4 rounded-lg text-center">
                                    <div class="text-2xl font-bold text-green-400" id="reward-count">0.0</div>
                                    <div class="text-sm text-gray-400">Recompensa</div>
                                </div>
                            </div>

                            <!-- Progreso del entrenamiento -->
                            <div id="rl-training-progress" class="bg-white/5 p-4 rounded-lg hidden">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-white">Entrenando en servidor Python...</span>
                                    <span class="text-purple-400" id="rl-progress-text">0%</span>
                                </div>
                                <div class="w-full bg-gray-700 rounded-full h-2">
                                    <div id="rl-progress-bar" class="bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full progress-bar" style="width: 0%"></div>
                                </div>
                            </div>

                            <!-- Leyenda -->
                            <div class="bg-white/5 p-4 rounded-lg">
                                <h4 class="text-white font-semibold mb-3">Leyenda</h4>
                                <div class="grid grid-cols-2 gap-2 text-sm">
                                    <div class="flex items-center">
                                        <div class="w-4 h-4 bg-green-500 rounded mr-2"></div>
                                        <span class="text-gray-300">Inicio (S)</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-4 h-4 bg-yellow-500 rounded mr-2"></div>
                                        <span class="text-gray-300">Meta (G)</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-4 h-4 bg-gray-800 rounded mr-2"></div>
                                        <span class="text-gray-300">Pared (#)</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-4 h-4 bg-blue-400 rounded mr-2"></div>
                                        <span class="text-gray-300">Ruta Ãptima</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- VisualizaciÃ³n del laberinto y grÃ¡fico -->
                        <div class="space-y-4">
                            <div class="bg-white/5 p-4 rounded-lg">
                                <h4 class="text-white font-semibold mb-4">Laberinto y Tabla Q</h4>
                                <div id="maze-container" class="grid grid-cols-5 gap-1 mb-4 justify-center">
                                    <!-- El laberinto se generarÃ¡ aquÃ­ -->
                                </div>
                                <p class="text-gray-300 text-xs">ð¡ Los colores representan valores Q: verde = positivo, rojo = negativo</p>
                            </div>

                            <!-- GrÃ¡fico de mejora en tiempo real -->
                            <div class="chart-container">
                                <h4 class="text-white font-semibold mb-4">ð Progreso del Aprendizaje en Tiempo Real</h4>
                                <div class="bg-gray-800 rounded-lg p-4">
                                    <canvas id="rewardChart" width="400" height="200"></canvas>
                                </div>
                                <div class="mt-2 flex justify-between text-xs text-gray-400">
                                    <span>Episodio 1</span>
                                    <span>Recompensa promedio</span>
                                    <span>Episodio actual</span>
                                </div>
                            </div>

                            <div id="optimal-path-info" class="bg-green-500/10 border border-green-500/30 p-4 rounded-lg hidden">
                                <div class="flex items-center mb-2">
                                    <i data-lucide="trophy" class="w-5 h-5 text-yellow-400 mr-2"></i>
                                    <span class="text-white font-semibold">Ruta Ãptima Encontrada</span>
                                </div>
                                <p class="text-gray-300 text-sm" id="path-stats">
                                    Pasos: 0 | Eficiencia: 0%
                                </p>
                            </div>

                            <!-- Mensajes de error/Ã©xito -->
                            <div id="rl-messages"></div>
                        </div>
                    </div>
                </div>

                <!-- Code Tab -->
                <div id="rl-code" class="rl-tab-content">
                    <div class="space-y-6">
                        <div class="text-center mb-8">
                            <i data-lucide="code" class="w-16 h-16 mx-auto mb-6 text-purple-400"></i>
                            <h2 class="text-3xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                                Q-Learning en Python (Servidor)
                            </h2>
                            <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                                ImplementaciÃ³n completa del algoritmo Q-Learning ejecutÃ¡ndose en el servidor Python
                            </p>
                        </div>

                        <div class="glass-effect rounded-2xl p-8">
                            <div class="space-y-8">
                                <!-- API Call para crear agente -->
                                <div>
                                    <h3 class="text-2xl font-bold text-purple-400 mb-4">1. Crear Agente RL via API</h3>
                                    <div class="code-block">
<pre><span class="highlight-green">// Frontend - Crear agente de Q-Learning</span>
<span class="highlight-blue">async function</span> <span class="highlight-yellow">createRLAgent</span>() {
    <span class="highlight-blue">const</span> <span class="highlight-purple">response</span> = <span class="highlight-blue">await</span> <span class="highlight-yellow">fetch</span>(<span class="highlight-red">'http://localhost:5000/api/create-rl-agent'</span>, {
        <span class="highlight-purple">method</span>: <span class="highlight-red">'POST'</span>,
        <span class="highlight-purple">headers</span>: { <span class="highlight-red">'Content-Type'</span>: <span class="highlight-red">'application/json'</span> },
        <span class="highlight-purple">body</span>: <span class="highlight-yellow">JSON</span>.<span class="highlight-purple">stringify</span>({
            <span class="highlight-purple">session_id</span>: <span class="highlight-red">'user-rl-session'</span>,
            <span class="highlight-purple">learning_rate</span>: <span class="highlight-yellow">parseFloat</span>(<span class="highlight-yellow">document</span>.<span class="highlight-purple">getElementById</span>(<span class="highlight-red">'lr-slider'</span>).<span class="highlight-purple">value</span>),
            <span class="highlight-purple">discount_factor</span>: <span class="highlight-yellow">parseFloat</span>(<span class="highlight-yellow">document</span>.<span class="highlight-purple">getElementById</span>(<span class="highlight-red">'df-slider'</span>).<span class="highlight-purple">value</span>),
            <span class="highlight-purple">exploration_rate</span>: <span class="highlight-yellow">parseFloat</span>(<span class="highlight-yellow">document</span>.<span class="highlight-purple">getElementById</span>(<span class="highlight-red">'er-slider'</span>).<span class="highlight-purple">value</span>)
        })
    });
    
    <span class="highlight-blue">const</span> <span class="highlight-purple">data</span> = <span class="highlight-blue">await</span> <span class="highlight-purple">response</span>.<span class="highlight-purple">json</span>();
    <span class="highlight-blue">if</span> (<span class="highlight-purple">data</span>.<span class="highlight-purple">success</span>) {
        <span class="highlight-yellow">console</span>.<span class="highlight-purple">log</span>(<span class="highlight-red">'Agente RL creado exitosamente'</span>);
    }
}</pre>
                                    </div>
                                </div>

                                <!-- Servidor Python - Clase QLearning -->
                                <div>
                                    <h3 class="text-2xl font-bold text-purple-400 mb-4">2. Clase QLearningAgent en el Servidor</h3>
                                    <div class="code-block">
<pre><span class="highlight-blue">class</span> <span class="highlight-yellow">QLearningAgent</span>:
    <span class="highlight-blue">def</span> <span class="highlight-purple">__init__</span>(<span class="highlight-yellow">self</span>, <span class="highlight-purple">actions</span>, <span class="highlight-purple">learning_rate</span>=<span class="highlight-green">0.1</span>, 
                 <span class="highlight-purple">discount_factor</span>=<span class="highlight-green">0.9</span>, <span class="highlight-purple">exploration_rate</span>=<span class="highlight-green">0.1</span>):
        <span class="highlight-yellow">self</span>.<span class="highlight-purple">actions</span> = <span class="highlight-purple">actions</span>
        <span class="highlight-yellow">self</span>.<span class="highlight-purple">learning_rate</span> = <span class="highlight-purple">learning_rate</span>
        <span class="highlight-yellow">self</span>.<span class="highlight-purple">discount_factor</span> = <span class="highlight-purple">discount_factor</span>
        <span class="highlight-yellow">self</span>.<span class="highlight-purple">exploration_rate</span> = <span class="highlight-purple">exploration_rate</span>
        <span class="highlight-yellow">self</span>.<span class="highlight-purple">q_table</span> = <span class="highlight-yellow">defaultdict</span>(<span class="highlight-blue">lambda</span>: <span class="highlight-yellow">defaultdict</span>(<span class="highlight-blue">float</span>))
    
    <span class="highlight-blue">def</span> <span class="highlight-purple">choose_action</span>(<span class="highlight-yellow">self</span>, <span class="highlight-purple">state</span>):
        <span class="highlight-green">"""Estrategia epsilon-greedy"""</span>
        <span class="highlight-blue">if</span> <span class="highlight-yellow">random</span>.<span class="highlight-purple">random</span>() < <span class="highlight-yellow">self</span>.<span class="highlight-purple">exploration_rate</span>:
            <span class="highlight-blue">return</span> <span class="highlight-yellow">random</span>.<span class="highlight-purple">choice</span>(<span class="highlight-yellow">self</span>.<span class="highlight-purple">actions</span>)
        <span class="highlight-blue">else</span>:
            <span class="highlight-purple">q_values</span> = <span class="highlight-yellow">self</span>.<span class="highlight-purple">q_table</span>[<span class="highlight-purple">state</span>]
            <span class="highlight-blue">if</span> <span class="highlight-blue">not</span> <span class="highlight-purple">q_values</span>:
                <span class="highlight-blue">return</span> <span class="highlight-yellow">random</span>.<span class="highlight-purple">choice</span>(<span class="highlight-yellow">self</span>.<span class="highlight-purple">actions</span>)
            <span class="highlight-blue">return</span> <span class="highlight-purple">max</span>(<span class="highlight-purple">q_values</span>, <span class="highlight-purple">key</span>=<span class="highlight-purple">q_values</span>.<span class="highlight-purple">get</span>)
    
    <span class="highlight-blue">def</span> <span class="highlight-purple">update_q_value</span>(<span class="highlight-yellow">self</span>, <span class="highlight-purple">state</span>, <span class="highlight-purple">action</span>, <span class="highlight-purple">reward</span>, <span class="highlight-purple">next_state</span>):
        <span class="highlight-green">"""Actualizar tabla Q usando ecuaciÃ³n de Bellman"""</span>
        <span class="highlight-purple">current_q</span> = <span class="highlight-yellow">self</span>.<span class="highlight-purple">q_table</span>[<span class="highlight-purple">state</span>][<span class="highlight-purple">action</span>]
        <span class="highlight-purple">next_q_values</span> = <span class="highlight-yellow">self</span>.<span class="highlight-purple">q_table</span>[<span class="highlight-purple">next_state</span>]
        <span class="highlight-purple">max_next_q</span> = <span class="highlight-purple">max</span>(<span class="highlight-purple">next_q_values</span>.<span class="highlight-purple">values</span>()) <span class="highlight-blue">if</span> <span class="highlight-purple">next_q_values</span> <span class="highlight-blue">else</span> <span class="highlight-green">0</span>
        
        <span class="highlight-purple">new_q</span> = <span class="highlight-purple">current_q</span> + <span class="highlight-yellow">self</span>.<span class="highlight-purple">learning_rate</span> * (
            <span class="highlight-purple">reward</span> + <span class="highlight-yellow">self</span>.<span class="highlight-purple">discount_factor</span> * <span class="highlight-purple">max_next_q</span> - <span class="highlight-purple">current_q</span>
        )
        <span class="highlight-yellow">self</span>.<span class="highlight-purple">q_table</span>[<span class="highlight-purple">state</span>][<span class="highlight-purple">action</span>] = <span class="highlight-purple">new_q</span></pre>
                                    </div>
                                </div>

                                <!-- Endpoint de entrenamiento -->
                                <div>
                                    <h3 class="text-2xl font-bold text-purple-400 mb-4">3. Endpoint de Entrenamiento</h3>
                                    <div class="code-block">
<pre><span class="highlight-blue">@app.route</span>(<span class="highlight-red">'/api/train-rl-agent'</span>, <span class="highlight-purple">methods</span>=[<span class="highlight-red">'POST'</span>])
<span class="highlight-blue">def</span> <span class="highlight-yellow">train_rl_agent</span>():
    <span class="highlight-purple">request_data</span> = <span class="highlight-purple">request</span>.<span class="highlight-purple">get_json</span>()
    <span class="highlight-purple">session_id</span> = <span class="highlight-purple">request_data</span>.<span class="highlight-purple">get</span>(<span class="highlight-red">'session_id'</span>, <span class="highlight-red">'default'</span>)
    <span class="highlight-purple">num_episodes</span> = <span class="highlight-purple">request_data</span>.<span class="highlight-purple">get</span>(<span class="highlight-red">'num_episodes'</span>, <span class="highlight-green">100</span>)
    
    <span class="highlight-purple">agent_data</span> = <span class="highlight-purple">rl_agents</span>[<span class="highlight-purple">session_id</span>]
    <span class="highlight-purple">agent</span> = <span class="highlight-purple">agent_data</span>[<span class="highlight-red">'agent'</span>]
    <span class="highlight-purple">env</span> = <span class="highlight-purple">agent_data</span>[<span class="highlight-red">'environment'</span>]
    
    <span class="highlight-purple">episode_rewards</span> = []
    
    <span class="highlight-blue">for</span> <span class="highlight-purple">episode</span> <span class="highlight-blue">in</span> <span class="highlight-purple">range</span>(<span class="highlight-purple">num_episodes</span>):
        <span class="highlight-purple">state</span> = <span class="highlight-purple">env</span>.<span class="highlight-purple">reset</span>()
        <span class="highlight-purple">episode_reward</span> = <span class="highlight-green">0</span>
        <span class="highlight-purple">steps</span> = <span class="highlight-green">0</span>
        <span class="highlight-purple">max_steps</span> = <span class="highlight-green">100</span>
        
        <span class="highlight-blue">while</span> <span class="highlight-purple">steps</span> < <span class="highlight-purple">max_steps</span>:
            <span class="highlight-purple">state_key</span> = <span class="highlight-red">f"{state[0]},{state[1]}"</span>
            <span class="highlight-purple">action</span> = <span class="highlight-purple">agent</span>.<span class="highlight-purple">choose_action</span>(<span class="highlight-purple">state_key</span>)
            <span class="highlight-purple">next_state</span>, <span class="highlight-purple">reward</span>, <span class="highlight-purple">done</span> = <span class="highlight-purple">env</span>.<span class="highlight-purple">step</span>(<span class="highlight-purple">action</span>)
            <span class="highlight-purple">next_state_key</span> = <span class="highlight-red">f"{next_state[0]},{next_state[1]}"</span>
            
            <span class="highlight-purple">agent</span>.<span class="highlight-purple">update_q_value</span>(<span class="highlight-purple">state_key</span>, <span class="highlight-purple">action</span>, <span class="highlight-purple">reward</span>, <span class="highlight-purple">next_state_key</span>)
            
            <span class="highlight-purple">state</span> = <span class="highlight-purple">next_state</span>
            <span class="highlight-purple">episode_reward</span> += <span class="highlight-purple">reward</span>
            <span class="highlight-purple">steps</span> += <span class="highlight-green">1</span>
            
            <span class="highlight-blue">if</span> <span class="highlight-purple">done</span>:
                <span class="highlight-blue">break</span>
        
        <span class="highlight-purple">episode_rewards</span>.<span class="highlight-purple">append</span>(<span class="highlight-purple">episode_reward</span>)
        <span class="highlight-purple">agent</span>.<span class="highlight-purple">exploration_rate</span> = <span class="highlight-purple">max</span>(<span class="highlight-green">0.01</span>, <span class="highlight-purple">agent</span>.<span class="highlight-purple">exploration_rate</span> * <span class="highlight-green">0.995</span>)
    
    <span class="highlight-blue">return</span> <span class="highlight-yellow">jsonify</span>({
        <span class="highlight-red">'success'</span>: <span class="highlight-blue">True</span>,
        <span class="highlight-red">'episode_rewards'</span>: <span class="highlight-purple">episode_rewards</span>,
        <span class="highlight-red">'q_table'</span>: <span class="highlight-purple">dict</span>(<span class="highlight-purple">agent</span>.<span class="highlight-purple">q_table</span>),
        <span class="highlight-red">'final_exploration_rate'</span>: <span class="highlight-purple">agent</span>.<span class="highlight-purple">exploration_rate</span>
    })</pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Python Code Section -->
    <section id="python-code" class="py-20 px-4 relative">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-12">
                <i data-lucide="code" class="w-16 h-16 mx-auto mb-6 text-green-400"></i>
                <h2 class="text-4xl font-bold mb-6 text-white">Servidor Python Completo</h2>
                <p class="text-xl text-gray-300">
                    ImplementaciÃ³n completa del servidor con Flask y algoritmos de ML
                </p>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="glass-effect rounded-2xl p-6">
                    <h3 class="text-2xl font-bold text-green-400 mb-4">ð³ Ãrboles de DecisiÃ³n</h3>
                    <p class="text-gray-300 mb-4">ImplementaciÃ³n completa con API REST</p>
                    <div class="space-y-2 text-sm text-gray-400 mb-4">
                        <p>â¢ GeneraciÃ³n de datos sintÃ©ticos Iris</p>
                        <p>â¢ CÃ¡lculo de entropÃ­a e informaciÃ³n</p>
                        <p>â¢ ConstrucciÃ³n recursiva del Ã¡rbol</p>
                        <p>â¢ PredicciÃ³n con camino de decisiÃ³n</p>
                    </div>
                    <button onclick="downloadFile('server.py')" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-all duration-300">
                        <i data-lucide="download" class="inline w-4 h-4 mr-2"></i>
                        Descargar server.py
                    </button>
                </div>

                <div class="glass-effect rounded-2xl p-6">
                    <h3 class="text-2xl font-bold text-purple-400 mb-4">ð¯ Q-Learning</h3>
                    <p class="text-gray-300 mb-4">Algoritmo completo con entorno de laberinto</p>
                    <div class="space-y-2 text-sm text-gray-400 mb-4">
                        <p>â¢ Agente con estrategia epsilon-greedy</p>
                        <p>â¢ Entorno de laberinto configurable</p>
                        <p>â¢ ActualizaciÃ³n de tabla Q</p>
                        <p>â¢ BÃºsqueda de polÃ­tica Ã³ptima</p>
                    </div>
                    <button onclick="downloadFile('requirements.txt')" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-all duration-300">
                        <i data-lucide="download" class="inline w-4 h-4 mr-2"></i>
                        Descargar requirements.txt
                    </button>
                </div>
            </div>

            <div class="mt-8 glass-effect rounded-2xl p-6">
                <h3 class="text-2xl font-bold text-cyan-400 mb-4">ð Instrucciones de InstalaciÃ³n</h3>
                <div class="code-block">
<pre><span class="highlight-green"># 1. Instalar dependencias</span>
<span class="highlight-purple">pip install flask flask-cors numpy</span>

<span class="highlight-green"># 2. Ejecutar el servidor</span>
<span class="highlight-purple">python server.py</span>

<span class="highlight-green"># 3. Abrir el frontend</span>
<span class="highlight-purple">open index.html</span>

<span class="highlight-green"># El servidor estarÃ¡ disponible en http://localhost:5000</span>
<span class="highlight-green"># El frontend se conectarÃ¡ automÃ¡ticamente al servidor</span></pre>
                </div>
            </div>
        </div>
    </section>

    <!-- Comparison Section -->
    <section id="comparacion" class="py-20 px-4 relative">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-12">
                <i data-lucide="scale" class="w-16 h-16 mx-auto mb-6 text-orange-400"></i>
                <h2 class="text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-orange-400 to-yellow-400 bg-clip-text text-transparent">
                    Ãrboles de DecisiÃ³n vs. Reinforcement Learning
                </h2>
                <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                    Comprende las diferencias clave y cuÃ¡ndo usar cada enfoque de Machine Learning.
                </p>
            </div>

            <div class="glass-effect rounded-2xl p-8">
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-2xl font-bold text-green-400 mb-4">ð³ Ãrboles de DecisiÃ³n</h3>
                        <div class="space-y-4 text-gray-300">
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="check-circle" class="w-6 h-6 mr-3 text-green-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">Tipo de Aprendizaje:</strong> Supervisado. Requiere datos etiquetados (input-output).</p>
                            </div>
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="check-circle" class="w-6 h-6 mr-3 text-green-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">Objetivo:</strong> Clasificar o predecir un valor continuo basÃ¡ndose en caracterÃ­sticas.</p>
                            </div>
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="check-circle" class="w-6 h-6 mr-3 text-green-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">CÃ³mo aprende:</strong> Divide los datos repetidamente en subconjuntos mÃ¡s homogÃ©neos hasta que se alcanza una condiciÃ³n de parada.</p>
                            </div>
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="check-circle" class="w-6 h-6 mr-3 text-green-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">Casos de Uso TÃ­picos:</strong> DiagnÃ³stico mÃ©dico, aprobaciÃ³n de prÃ©stamos, detecciÃ³n de spam, segmentaciÃ³n de clientes.</p>
                            </div>
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="check-circle" class="w-6 h-6 mr-3 text-green-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">Ventajas:</strong> FÃ¡cil de entender e interpretar (modelo de "caja blanca"), no requiere mucha preparaciÃ³n de datos.</p>
                            </div>
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="minus-circle" class="w-6 h-6 mr-3 text-red-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">Desventajas:</strong> Pueden ser inestables (pequeÃ±os cambios en los datos pueden crear un Ã¡rbol muy diferente), propensos a sobreajuste.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-purple-400 mb-4">ð¯ Reinforcement Learning</h3>
                        <div class="space-y-4 text-gray-300">
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="check-circle" class="w-6 h-6 mr-3 text-purple-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">Tipo de Aprendizaje:</strong> Por refuerzo. Aprende interactuando con un entorno.</p>
                            </div>
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="check-circle" class="w-6 h-6 mr-3 text-purple-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">Objetivo:</strong> Aprender una "polÃ­tica" (estrategia) para maximizar una recompensa acumulada a largo plazo.</p>
                            </div>
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="check-circle" class="w-6 h-6 mr-3 text-purple-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">CÃ³mo aprende:</strong> Un agente prueba acciones en un entorno, recibe recompensas (o penalizaciones) y ajusta su comportamiento para obtener mÃ¡s recompensas.</p>
                            </div>
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="check-circle" class="w-6 h-6 mr-3 text-purple-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">Casos de Uso TÃ­picos:</strong> Agentes de videojuegos, robÃ³tica, sistemas de recomendaciÃ³n, gestiÃ³n de recursos, coches autÃ³nomos.</p>
                            </div>
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="check-circle" class="w-6 h-6 mr-3 text-purple-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">Ventajas:</strong> Capaz de resolver problemas complejos sin datos etiquetados, adaptable a entornos cambiantes.</p>
                            </div>
                            <div class="flex items-start bg-white/5 p-4 rounded-lg">
                                <i data-lucide="minus-circle" class="w-6 h-6 mr-3 text-red-400 flex-shrink-0 mt-1"></i>
                                <p><strong class="text-white">Desventajas:</strong> Requiere mucha interacciÃ³n con el entorno (puede ser lento o costoso), difÃ­cil de depurar y garantizar seguridad.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Resources Section -->
    <section id="recursos" class="py-20 px-4 relative">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-12">
                <i data-lucide="book-open" class="w-16 h-16 mx-auto mb-6 text-cyan-400"></i>
                <h2 class="text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent">
                    ð Recursos para Profundizar
                </h2>
                <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                    ContinÃºa tu viaje de aprendizaje con estos recursos cuidadosamente seleccionados
                </p>
            </div>

            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <!-- Libros Recomendados -->
                <div class="resource-card">
                    <div class="flex items-center mb-6">
                        <i data-lucide="book" class="w-8 h-8 mr-3 text-green-400"></i>
                        <h3 class="text-2xl font-bold text-green-400">ð Libros Recomendados</h3>
                    </div>
                    <div class="space-y-3">
                        <div class="resource-item">
                            <span class="resource-bullet">â¢</span>
                            <div>
                                <div class="text-white font-semibold">"Hands-On Machine Learning"</div>
                                <div class="text-gray-400 text-sm">AurÃ©lien GÃ©ron</div>
                                <div class="text-gray-500 text-xs mt-1">Enfoque prÃ¡ctico con Python y Scikit-learn</div>
                            </div>
                        </div>
                        <div class="resource-item">
                            <span class="resource-bullet">â¢</span>
                            <div>
                                <div class="text-white font-semibold">"Reinforcement Learning: An Introduction"</div>
                                <div class="text-gray-400 text-sm">Sutton & Barto</div>
                                <div class="text-gray-500 text-xs mt-1">La biblia del Reinforcement Learning</div>
                            </div>
                        </div>
                        <div class="resource-item">
                            <span class="resource-bullet">â¢</span>
                            <div>
                                <div class="text-white font-semibold">"Pattern Recognition and Machine Learning"</div>
                                <div class="text-gray-400 text-sm">Christopher Bishop</div>
                                <div class="text-gray-500 text-xs mt-1">Fundamentos matemÃ¡ticos sÃ³lidos</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recursos Online -->
                <div class="resource-card">
                    <div class="flex items-center mb-6">
                        <i data-lucide="globe" class="w-8 h-8 mr-3 text-blue-400"></i>
                        <h3 class="text-2xl font-bold text-blue-400">ð Recursos Online</h3>
                    </div>
                    <div class="space-y-3">
                        <div class="resource-item">
                            <span class="resource-bullet">â¢</span>
                            <div>
                                <div class="text-white font-semibold">Coursera: Machine Learning Course</div>
                                <div class="text-gray-400 text-sm">Andrew Ng</div>
                                <div class="text-gray-500 text-xs mt-1">Curso fundamental y accesible</div>
                            </div>
                        </div>
                        <div class="resource-item">
                            <span class="resource-bullet">â¢</span>
                            <div>
                                <div class="text-white font-semibold">edX: Introduction to Artificial Intelligence</div>
                                <div class="text-gray-400 text-sm">MIT</div>
                                <div class="text-gray-500 text-xs mt-1">Perspectiva acadÃ©mica rigurosa</div>
                            </div>
                        </div>
                        <div class="resource-item">
                            <span class="resource-bullet">â¢</span>
                            <div>
                                <div class="text-white font-semibold">YouTube: 3Blue1Brown Neural Networks</div>
                                <div class="text-gray-400 text-sm">Grant Sanderson</div>
                                <div class="text-gray-500 text-xs mt-1">Visualizaciones excepcionales</div>
                            </div>
                        </div>
                        <div class="resource-item">
                            <span class="resource-bullet">â¢</span>
                            <div>
                                <div class="text-white font-semibold">Kaggle Learn</div>
                                <div class="text-gray-400 text-sm">Micro-cursos gratuitos</div>
                                <div class="text-gray-500 text-xs mt-1">PrÃ¡ctica con datasets reales</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Herramientas Ãtiles -->
                <div class="resource-card">
                    <div class="flex items-center mb-6">
                        <i data-lucide="wrench" class="w-8 h-8 mr-3 text-purple-400"></i>
                        <h3 class="text-2xl font-bold text-purple-400">ð ï¸ Herramientas Ãtiles</h3>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <div class="text-cyan-400 font-semibold mb-2">Python:</div>
                            <div class="space-y-1">
                                <div class="resource-item">
                                    <span class="resource-bullet">â¢</span>
                                    <span class="text-gray-300">scikit-learn - ML clÃ¡sico</span>
                                </div>
                                <div class="resource-item">
                                    <span class="resource-bullet">â¢</span>
                                    <span class="text-gray-300">TensorFlow - Deep Learning</span>
                                </div>
                                <div class="resource-item">
                                    <span class="resource-bullet">â¢</span>
                                    <span class="text-gray-300">PyTorch - InvestigaciÃ³n</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="text-cyan-400 font-semibold mb-2">JavaScript:</div>
                            <div class="space-y-1">
                                <div class="resource-item">
                                    <span class="resource-bullet">â¢</span>
                                    <span class="text-gray-300">D3.js - Visualizaciones</span>
                                </div>
                                <div class="resource-item">
                                    <span class="resource-bullet">â¢</span>
                                    <span class="text-gray-300">TensorFlow.js - ML en web</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="text-cyan-400 font-semibold mb-2">Servidor:</div>
                            <div class="space-y-1">
                                <div class="resource-item">
                                    <span class="resource-bullet">â¢</span>
                                    <span class="text-gray-300">Flask - API REST</span>
                                </div>
                                <div class="resource-item">
                                    <span class="resource-bullet">â¢</span>
                                    <span class="text-gray-300">FastAPI - API moderna</span>
                                </div>
                                <div class="resource-item">
                                    <span class="resource-bullet">â¢</span>
                                    <span class="text-gray-300">NumPy - ComputaciÃ³n</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Consejos adicionales -->
            <div class="glass-effect rounded-2xl p-8">
                <h3 class="text-white text-xl font-semibold text-center mb-6">ð¡ Consejos para tu Aprendizaje</h3>
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="text-cyan-400 font-semibold mb-4">ð¯ Enfoque PrÃ¡ctico</h4>
                        <ul class="text-gray-300 space-y-2 text-sm">
                            <li>â¢ Implementa algoritmos desde cero antes de usar librerÃ­as</li>
                            <li>â¢ Participa en competencias de Kaggle</li>
                            <li>â¢ Crea proyectos personales con datos que te interesen</li>
                            <li>â¢ Documenta y comparte tu cÃ³digo en GitHub</li>
                            <li>â¢ Separa frontend y backend como en este proyecto</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="text-purple-400 font-semibold mb-4">ð ProgresiÃ³n Recomendada</h4>
                        <ul class="text-gray-300 space-y-2 text-sm">
                            <li>â¢ Comienza con algoritmos supervisados bÃ¡sicos</li>
                            <li>â¢ Domina la preparaciÃ³n y limpieza de datos</li>
                            <li>â¢ Aprende tÃ©cnicas de validaciÃ³n y evaluaciÃ³n</li>
                            <li>â¢ Explora algoritmos no supervisados</li>
                            <li>â¢ Profundiza en Deep Learning y RL</li>
                            <li>â¢ Construye APIs y sistemas distribuidos</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-12 px-4 bg-black/50 glass-effect">
        <div class="max-w-4xl mx-auto text-center">
            <h3 class="text-2xl font-bold text-white mb-4">Â¡Sigue Explorando!</h3>
            <p class="text-gray-300 mb-6">
                Este es solo el comienzo de tu viaje en Machine Learning con arquitectura cliente-servidor.
            </p>
            <div class="flex flex-wrap justify-center gap-4 mb-6">
                <span class="bg-white/10 px-3 py-1 rounded-full text-sm">Flask</span>
                <span class="bg-white/10 px-3 py-1 rounded-full text-sm">Python</span>
                <span class="bg-white/10 px-3 py-1 rounded-full text-sm">JavaScript</span>
                <span class="bg-white/10 px-3 py-1 rounded-full text-sm">REST API</span>
                <span class="bg-white/10 px-3 py-1 rounded-full text-sm">NumPy</span>
            </div>
            <p class="text-gray-400 text-sm">Desarrollado con â¤ï¸ para hacer el Machine Learning mÃ¡s accesible con arquitectura moderna</p>
        </div>
    </footer>

    <script>
        // ConfiguraciÃ³n del servidor
        const SERVER_URL = 'http://localhost:5000';
        let sessionId = 'user-session-' + Math.random().toString(36).substr(2, 9);

        // Variables globales
        let decisionTree = null;
        let currentDisplayDepth = 6;
        let userCharacteristics = {
            sepalLength: 5.0,
            sepalWidth: 3.0,
            petalLength: 3.0,
            petalWidth: 1.0
        };
        let predictionPath = [];
        let rewardChart = null;
        let isTraining = false;

        // Funciones de utilidad
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        }

        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        function showRLTab(tabId) {
            document.querySelectorAll('.rl-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.rl-tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        function showTreeDepth(depth) {
            currentDisplayDepth = depth;
            
            document.querySelectorAll('.depth-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderDecisionTree();
        }

        // FunciÃ³n para mostrar mensajes
        function showMessage(containerId, message, type = 'info') {
            const container = document.getElementById(containerId);
            if (!container) return;

            const messageDiv = document.createElement('div');
            messageDiv.className = type === 'error' ? 'error-message' : 'success-message';
            messageDiv.innerHTML = `
                <div class="flex items-center">
                    <i data-lucide="${type === 'error' ? 'alert-circle' : 'check-circle'}" class="w-5 h-5 mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            container.innerHTML = '';
            container.appendChild(messageDiv);
            lucide.createIcons();

            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.parentNode.removeChild(messageDiv);
                }
            }, 5000);
        }

        // FunciÃ³n para verificar conexiÃ³n con el servidor
        async function checkServerConnection() {
            try {
                const response = await fetch(`${SERVER_URL}/api/generate-data`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({})
                });
                
                if (response.ok) {
                    document.getElementById('server-status').innerHTML = 'ð¢ Conectado';
                    document.getElementById('server-status').parentElement.className = 
                        'ml-4 px-3 py-1 bg-green-500/20 border border-green-500/30 rounded-full text-xs text-green-400';
                    return true;
                } else {
                    throw new Error('Server responded with error');
                }
            } catch (error) {
                document.getElementById('server-status').innerHTML = 'ð´ Desconectado';
                document.getElementById('server-status').parentElement.className = 
                    'ml-4 px-3 py-1 bg-red-500/20 border border-red-500/30 rounded-full text-xs text-red-400';
                return false;
            }
        }

        // Funciones de Ãrboles de DecisiÃ³n
        async function trainDecisionTree() {
            const trainBtn = document.getElementById('train-tree-btn');
            const progressDiv = document.getElementById('training-progress');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            
            if (trainBtn) {
                trainBtn.disabled = true;
                trainBtn.innerHTML = '<div class="loading-spinner"></div>Entrenando...';
            }
            
            if (progressDiv) {
                progressDiv.classList.remove('hidden');
                
                // Simular progreso
                for (let i = 0; i <= 100; i += 20) {
                    progressBar.style.width = i + '%';
                    progressText.textContent = i + '%';
                    await new Promise(resolve => setTimeout(resolve, 200));
                }
            }

            try {
                const maxDepth = parseInt(document.getElementById('depth-slider').value);
                
                const response = await fetch(`${SERVER_URL}/api/train-decision-tree`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        max_depth: maxDepth,
                        session_id: sessionId
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    decisionTree = data.tree;
                    renderDecisionTree();
                    updatePrediction();
                    showMessage('dt-messages', 'Ãrbol de decisiÃ³n entrenado exitosamente', 'success');
                } else {
                    throw new Error(data.error || 'Error desconocido');
                }
            } catch (error) {
                console.error('Error training decision tree:', error);
                showMessage('dt-messages', `Error al entrenar el Ã¡rbol: ${error.message}`, 'error');
            } finally {
                if (trainBtn) {
                    trainBtn.disabled = false;
                    trainBtn.innerHTML = '<i data-lucide="play" class="inline w-4 h-4 mr-2"></i>Entrenar Ãrbol';
                    lucide.createIcons();
                }
                if (progressDiv) {
                    progressDiv.classList.add('hidden');
                }
            }
        }

        async function updatePrediction() {
            if (!decisionTree) return;

            try {
                const features = [
                    userCharacteristics.sepalLength,
                    userCharacteristics.sepalWidth,
                    userCharacteristics.petalLength,
                    userCharacteristics.petalWidth
                ];

                const response = await fetch(`${SERVER_URL}/api/predict`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_id: sessionId,
                        features: features
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    predictionPath = data.decision_path;
                    
                    // Actualizar UI
                    document.getElementById('predicted-species').textContent = data.prediction || 'Sin predicciÃ³n';
                    
                    // Actualizar camino de decisiÃ³n
                    const pathText = data.decision_path
                        .filter(node => !node.isLeaf)
                        .map(node => {
                            const featureNames = {
                                'sepalLength': 'Long. SÃ©palo',
                                'sepalWidth': 'Ancho SÃ©palo',
                                'petalLength': 'Long. PÃ©talo',
                                'petalWidth': 'Ancho PÃ©talo'
                            };
                            return `${featureNames[node.feature]} â¤ ${node.threshold.toFixed(2)}`;
                        })
                        .join(' â ');
                    
                    document.getElementById('prediction-path').textContent = 
                        pathText ? `Camino: ${pathText}` : 'Sin camino disponible';

                    // Actualizar barras de confianza (simuladas)
                    const confidences = calculateConfidence(data.prediction);
                    document.getElementById('setosa-confidence').style.width = `${confidences.Setosa}%`;
                    document.getElementById('versicolor-confidence').style.width = `${confidences.Versicolor}%`;
                    document.getElementById('virginica-confidence').style.width = `${confidences.Virginica}%`;

                    // Re-renderizar Ã¡rbol para mostrar camino
                    renderDecisionTree();
                }
            } catch (error) {
                console.error('Error updating prediction:', error);
            }
        }

        function calculateConfidence(prediction) {
            const confidences = { Setosa: 0, Versicolor: 0, Virginica: 0 };
            
            if (prediction) {
                confidences[prediction] = 85 + Math.random() * 15;
                const remaining = 100 - confidences[prediction];
                const others = Object.keys(confidences).filter(k => k !== prediction);
                others.forEach((other, index) => {
                    confidences[other] = index === 0 ? remaining * 0.7 : remaining * 0.3;
                });
            }

            return confidences;
        }

        function renderDecisionTree() {
            const svg = document.getElementById('tree-svg');
            if (!svg) return;
            
            svg.innerHTML = '';

            if (!decisionTree) {
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', '50%');
                text.setAttribute('y', '50%');
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('fill', '#9ca3af');
                text.setAttribute('font-size', '16');
                text.textContent = 'Haz clic en "Entrenar Ãrbol" para comenzar';
                svg.appendChild(text);
                return;
            }

            // Configurar dimensiones del SVG
            const svgWidth = 1200;
            const svgHeight = 800;
            svg.setAttribute('width', svgWidth);
            svg.setAttribute('height', svgHeight);
            svg.setAttribute('viewBox', `0 0 ${svgWidth} ${svgHeight}`);

            // Obtener IDs de nodos en el camino de predicciÃ³n
            const pathNodeIds = predictionPath.map(node => node.id);

            function renderNode(node, x, y, level, parentX = null, parentY = null) {
                if (!node || level > currentDisplayDepth) return;

                const nodeWidth = 180;
                const nodeHeight = 90;
                const levelHeight = 140;
                const childOffset = Math.max(120, 300 / (level + 1));

                // Dibujar lÃ­nea al padre si existe
                if (parentX !== null && parentY !== null) {
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', parentX);
                    line.setAttribute('y1', parentY + nodeHeight / 2);
                    line.setAttribute('x2', x);
                    line.setAttribute('y2', y - nodeHeight / 2);
                    line.setAttribute('stroke', pathNodeIds.includes(node.id) ? '#fbbf24' : '#64748b');
                    line.setAttribute('stroke-width', pathNodeIds.includes(node.id) ? '4' : '2');
                    svg.appendChild(line);
                }

                // Dibujar conexiones a nodos hijos
                if (!node.isLeaf && node.left && node.right && level < currentDisplayDepth) {
                    const leftX = x - childOffset;
                    const rightX = x + childOffset;
                    const childY = y + levelHeight;

                    renderNode(node.left, leftX, childY, level + 1, x, y);
                    renderNode(node.right, rightX, childY, level + 1, x, y);
                }

                // Determinar color del nodo
                let nodeColor = '#3b82f6';
                if (node.isLeaf) {
                    nodeColor = '#10b981';
                }
                if (pathNodeIds.includes(node.id)) {
                    nodeColor = '#f59e0b';
                }

                // Dibujar el nodo
                const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                rect.setAttribute('x', x - nodeWidth / 2);
                rect.setAttribute('y', y - nodeHeight / 2);
                rect.setAttribute('width', nodeWidth);
                rect.setAttribute('height', nodeHeight);
                rect.setAttribute('fill', nodeColor);
                rect.setAttribute('stroke', '#1e293b');
                rect.setAttribute('stroke-width', '2');
                rect.setAttribute('rx', '8');
                rect.style.cursor = 'pointer';
                rect.onclick = () => showNodeInfo(node);
                svg.appendChild(rect);

                // Texto del nodo
                const featureNames = {
                    'sepalLength': 'Long. SÃ©palo',
                    'sepalWidth': 'Ancho SÃ©palo',
                    'petalLength': 'Long. PÃ©talo',
                    'petalWidth': 'Ancho PÃ©talo'
                };

                // LÃ­nea 1: CaracterÃ­stica o predicciÃ³n
                const text1 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text1.setAttribute('x', x);
                text1.setAttribute('y', y - 20);
                text1.setAttribute('text-anchor', 'middle');
                text1.setAttribute('fill', 'white');
                text1.setAttribute('font-size', '12');
                text1.setAttribute('font-weight', 'bold');
                text1.textContent = node.isLeaf ? 
                    `Clase: ${node.prediction}` : 
                    featureNames[node.feature] || node.feature;
                svg.appendChild(text1);

                // LÃ­nea 2: Umbral o muestras
                const text2 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text2.setAttribute('x', x);
                text2.setAttribute('y', y);
                text2.setAttribute('text-anchor', 'middle');
                text2.setAttribute('fill', 'white');
                text2.setAttribute('font-size', '10');
                text2.textContent = node.isLeaf ? 
                    `Muestras: ${node.samples_count}` : 
                    `â¤ ${node.threshold.toFixed(2)}`;
                svg.appendChild(text2);

                // LÃ­nea 3: EntropÃ­a
                const text3 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text3.setAttribute('x', x);
                text3.setAttribute('y', y + 15);
                text3.setAttribute('text-anchor', 'middle');
                text3.setAttribute('fill', 'white');
                text3.setAttribute('font-size', '9');
                text3.textContent = `EntropÃ­a: ${node.entropy.toFixed(3)}`;
                svg.appendChild(text3);
            }

            renderNode(decisionTree, svgWidth / 2, 80, 0);
        }

        function showNodeInfo(node) {
            const infoDiv = document.getElementById('node-info');
            const detailsDiv = document.getElementById('node-details');
            
            const featureNames = {
                'sepalLength': 'Longitud del SÃ©palo',
                'sepalWidth': 'Ancho del SÃ©palo',
                'petalLength': 'Longitud del PÃ©talo',
                'petalWidth': 'Ancho del PÃ©talo'
            };

            detailsDiv.innerHTML = `
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <span class="text-gray-400">Tipo:</span>
                        <span class="ml-2 px-2 py-1 rounded text-xs ${node.isLeaf ? 'bg-green-600' : 'bg-blue-600'}">${node.isLeaf ? 'Hoja' : 'Nodo Interno'}</span>
                    </div>
                    <div>
                        <span class="text-gray-400">Profundidad:</span>
                        <span class="text-white ml-2">${node.depth}</span>
                    </div>
                </div>
                ${!node.isLeaf ? `
                    <div class="mb-4">
                        <span class="text-gray-400">CondiciÃ³n:</span>
                        <span class="text-white ml-2">${featureNames[node.feature] || node.feature} â¤ ${node.threshold.toFixed(2)}</span>
                    </div>
                    <div class="mb-4">
                        <span class="text-gray-400">Ganancia de InformaciÃ³n:</span>
                        <span class="text-white ml-2">${node.gain.toFixed(4)}</span>
                    </div>
                ` : `
                    <div class="mb-4">
                        <span class="text-gray-400">PredicciÃ³n:</span>
                        <span class="ml-2 px-2 py-1 rounded text-xs bg-green-600">${node.prediction}</span>
                    </div>
                `}
                <div class="mb-4">
                    <span class="text-gray-400">Muestras:</span>
                    <span class="text-white ml-2">${node.samples_count}</span>
                </div>
                <div class="mb-4">
                    <span class="text-gray-400">EntropÃ­a:</span>
                    <span class="text-white ml-2">${node.entropy.toFixed(3)}</span>
                </div>
            `;
            
            infoDiv.classList.remove('hidden');
        }

        function resetDecisionTree() {
            decisionTree = null;
            predictionPath = [];
            const svg = document.getElementById('tree-svg');
            if (svg) {
                svg.innerHTML = '<text x="50%" y="50%" text-anchor="middle" fill="#9ca3af" font-size="16">Haz clic en "Entrenar Ãrbol" para comenzar</text>';
            }
            document.getElementById('node-info').classList.add('hidden');
            document.getElementById('predicted-species').textContent = 'Entrena el Ã¡rbol primero';
            document.getElementById('prediction-path').textContent = 'Camino: No disponible';
        }

        async function shuffleData() {
            try {
                const response = await fetch(`${SERVER_URL}/api/generate-data`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({})
                });

                const data = await response.json();
                
                if (data.success) {
                    resetDecisionTree();
                    showMessage('dt-messages', 'Nuevos datos generados. Entrena el Ã¡rbol nuevamente.', 'success');
                } else {
                    throw new Error(data.error || 'Error generando datos');
                }
            } catch (error) {
                console.error('Error shuffling data:', error);
                showMessage('dt-messages', `Error generando nuevos datos: ${error.message}`, 'error');
            }
        }

        // Funciones de Reinforcement Learning
        async function createRLAgent() {
            const createBtn = document.getElementById('create-agent-btn');
            const trainBtn = document.getElementById('train-rl-btn');
            const pathBtn = document.getElementById('optimal-path-btn');
            
            if (createBtn) {
                createBtn.disabled = true;
                createBtn.innerHTML = '<div class="loading-spinner"></div>Creando...';
            }

            try {
                const response = await fetch(`${SERVER_URL}/api/create-rl-agent`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_id: sessionId,
                        learning_rate: parseFloat(document.getElementById('lr-slider').value),
                        discount_factor: parseFloat(document.getElementById('df-slider').value),
                        exploration_rate: parseFloat(document.getElementById('er-slider').value)
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    if (trainBtn) trainBtn.disabled = false;
                    if (pathBtn) pathBtn.disabled = false;
                    initializeMaze();
                    showMessage('rl-messages', 'Agente RL creado exitosamente', 'success');
                } else {
                    throw new Error(data.error || 'Error desconocido');
                }
            } catch (error) {
                console.error('Error creating RL agent:', error);
                showMessage('rl-messages', `Error creando agente RL: ${error.message}`, 'error');
            } finally {
                if (createBtn) {
                    createBtn.disabled = false;
                    createBtn.innerHTML = '<i data-lucide="plus" class="inline w-4 h-4 mr-2"></i>Crear Agente';
                    lucide.createIcons();
                }
            }
        }

        async function trainRLAgent() {
            if (isTraining) return;
            
            isTraining = true;
            const trainBtn = document.getElementById('train-rl-btn');
            const progressDiv = document.getElementById('rl-training-progress');
            const progressBar = document.getElementById('rl-progress-bar');
            const progressText = document.getElementById('rl-progress-text');
            const episodeCounter = document.getElementById('episodes-count');
            const rewardCounter = document.getElementById('reward-count');
            
            if (trainBtn) {
                trainBtn.disabled = true;
                trainBtn.innerHTML = '<div class="loading-spinner"></div>Entrenando...';
            }
            
            if (progressDiv) {
                progressDiv.classList.remove('hidden');
            }
            
            // Limpiar grÃ¡fico anterior
            if (rewardChart) {
                rewardChart.data.labels = [];
                rewardChart.data.datasets[0].data = [];
                rewardChart.data.datasets[1].data = [];
                rewardChart.update();
            }

            try {
                const response = await fetch(`${SERVER_URL}/api/train-rl-agent`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_id: sessionId,
                        num_episodes: 100
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    // Simular progreso y actualizar grÃ¡fico
                    for (let i = 0; i < data.episode_rewards.length; i++) {
                        const progress = ((i + 1) / data.episode_rewards.length * 100);
                        if (progressBar) progressBar.style.width = progress + '%';
                        if (progressText) progressText.textContent = Math.round(progress) + '%';
                        if (episodeCounter) episodeCounter.textContent = i + 1;
                        if (rewardCounter) rewardCounter.textContent = data.episode_rewards[i].toFixed(1);
                        
                        updateRewardChart(i + 1, data.episode_rewards[i]);
                        
                        if (i % 5 === 0) {
                            await new Promise(resolve => setTimeout(resolve, 50));
                        }
                    }
                    
                    // Actualizar visualizaciÃ³n del laberinto con tabla Q
                    updateMazeWithQTable(data.q_table);
                    
                    // Actualizar tasa de exploraciÃ³n
                    const erSlider = document.getElementById('er-slider');
                    const erValue = document.getElementById('er-value');
                    if (erSlider) erSlider.value = data.final_exploration_rate;
                    if (erValue) erValue.textContent = data.final_exploration_rate.toFixed(3);
                    
                    showMessage('rl-messages', 'Agente RL entrenado exitosamente', 'success');
                } else {
                    throw new Error(data.error || 'Error desconocido');
                }
            } catch (error) {
                console.error('Error training RL agent:', error);
                showMessage('rl-messages', `Error entrenando agente RL: ${error.message}`, 'error');
            } finally {
                if (trainBtn) {
                    trainBtn.disabled = false;
                    trainBtn.innerHTML = '<i data-lucide="play" class="inline w-4 h-4 mr-2"></i>Entrenar';
                    lucide.createIcons();
                }
                if (progressDiv) {
                    progressDiv.classList.add('hidden');
                }
                isTraining = false;
            }
        }

        async function findOptimalPath() {
            try {
                const response = await fetch(`${SERVER_URL}/api/get-optimal-path`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_id: sessionId
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    // Mostrar ruta Ã³ptima en el laberinto
                    highlightOptimalPath(data.path);
                    
                    // Mostrar informaciÃ³n de la ruta
                    const infoDiv = document.getElementById('optimal-path-info');
                    const statsDiv = document.getElementById('path-stats');
                    
                    if (infoDiv && statsDiv) {
                        const steps = data.steps;
                        const efficiency = ((1 - steps / 20) * 100).toFixed(1);
                        
                        statsDiv.textContent = `Pasos: ${steps} | Eficiencia: ${efficiency}%`;
                        infoDiv.classList.remove('hidden');
                    }
                    
                    showMessage('rl-messages', 'Ruta Ã³ptima encontrada', 'success');
                } else {
                    throw new Error(data.error || 'Error desconocido');
                }
            } catch (error) {
                console.error('Error finding optimal path:', error);
                showMessage('rl-messages', `Error encontrando ruta Ã³ptima: ${error.message}`, 'error');
            }
        }

        async function resetRLAgent() {
            try {
                const response = await fetch(`${SERVER_URL}/api/reset-rl-agent`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_id: sessionId
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    // Resetear UI
                    const episodeCounter = document.getElementById('episodes-count');
                    const rewardCounter = document.getElementById('reward-count');
                    const infoDiv = document.getElementById('optimal-path-info');
                    const erSlider = document.getElementById('er-slider');
                    const erValue = document.getElementById('er-value');
                    const trainBtn = document.getElementById('train-rl-btn');
                    const pathBtn = document.getElementById('optimal-path-btn');
                    
                    if (episodeCounter) episodeCounter.textContent = '0';
                    if (rewardCounter) rewardCounter.textContent = '0.0';
                    if (infoDiv) infoDiv.classList.add('hidden');
                    if (erSlider) erSlider.value = 0.1;
                    if (erValue) erValue.textContent = '0.100';
                    if (trainBtn) trainBtn.disabled = true;
                    if (pathBtn) pathBtn.disabled = true;
                    
                    // Limpiar grÃ¡fico
                    if (rewardChart) {
                        rewardChart.data.labels = [];
                        rewardChart.data.datasets[0].data = [];
                        rewardChart.data.datasets[1].data = [];
                        rewardChart.update();
                    }
                    
                    initializeMaze();
                    showMessage('rl-messages', 'Agente RL reseteado', 'success');
                } else {
                    throw new Error(data.error || 'Error desconocido');
                }
            } catch (error) {
                console.error('Error resetting RL agent:', error);
                showMessage('rl-messages', `Error reseteando agente RL: ${error.message}`, 'error');
            }
        }

        // Funciones auxiliares para RL
        function initializeMaze() {
            const container = document.getElementById('maze-container');
            if (!container) return;
            
            container.innerHTML = '';

            const maze = [
                ['S', '.', '.', '#', '.'],
                ['#', '#', '.', '#', '.'],
                ['.', '.', '.', '.', '.'],
                ['.', '#', '#', '#', 'G']
            ];

            maze.forEach((row, rowIndex) => {
                row.forEach((cell, colIndex) => {
                    const cellDiv = document.createElement('div');
                    cellDiv.className = 'maze-cell w-16 h-16 flex items-center justify-center text-white font-bold text-xs relative';
                    cellDiv.id = `cell-${rowIndex}-${colIndex}`;
                    
                    updateMazeCell(cellDiv, cell, rowIndex, colIndex);
                    container.appendChild(cellDiv);
                });
            });
        }

        function updateMazeCell(cellDiv, cell, row, col) {
            cellDiv.className = 'maze-cell w-16 h-16 flex items-center justify-center text-white font-bold text-xs relative border border-gray-500';
            
            if (cell === 'S') {
                cellDiv.classList.add('bg-green-500');
                cellDiv.textContent = 'ð';
            } else if (cell === 'G') {
                cellDiv.classList.add('bg-yellow-500');
                cellDiv.textContent = 'ð';
            } else if (cell === '#') {
                cellDiv.classList.add('bg-gray-800');
                cellDiv.textContent = 'ð§±';
            } else {
                cellDiv.classList.add('bg-gray-600');
                cellDiv.textContent = '';
            }
        }

        function updateMazeWithQTable(qTable) {
            const maze = [
                ['S', '.', '.', '#', '.'],
                ['#', '#', '.', '#', '.'],
                ['.', '.', '.', '.', '.'],
                ['.', '#', '#', '#', 'G']
            ];

            maze.forEach((row, rowIndex) => {
                row.forEach((cell, colIndex) => {
                    const cellDiv = document.getElementById(`cell-${rowIndex}-${colIndex}`);
                    if (cellDiv && cell === '.') {
                        const stateKey = `${rowIndex},${colIndex}`;
                        if (qTable[stateKey]) {
                            showQValues(cellDiv, qTable[stateKey]);
                        }
                    }
                });
            });
        }

        function showQValues(cellDiv, qValues) {
            const actions = ['up', 'right', 'down', 'left'];
            const actionSymbols = { up: 'â', right: 'â', down: 'â', left: 'â' };
            
            cellDiv.innerHTML = '';
            const grid = document.createElement('div');
            grid.className = 'absolute inset-0 grid grid-cols-2 grid-rows-2 text-[8px]';
            
            ['up', 'right', 'left', 'down'].forEach((action, index) => {
                const qValue = qValues[action] || 0;
                const actionDiv = document.createElement('div');
                actionDiv.className = 'flex items-center justify-center';
                actionDiv.style.backgroundColor = getQValueColor(qValue);
                actionDiv.textContent = actionSymbols[action];
                grid.appendChild(actionDiv);
            });
            
            cellDiv.appendChild(grid);
            
            const bestAction = getBestAction(qValues);
            const centerDiv = document.createElement('div');
            centerDiv.className = 'absolute inset-0 flex items-center justify-center text-lg';
            centerDiv.textContent = actionSymbols[bestAction];
            cellDiv.appendChild(centerDiv);
        }

        function getQValueColor(value) {
            const normalized = Math.max(-1, Math.min(1, value / 5));
            if (normalized > 0) {
                return `rgba(34, 197, 94, ${normalized})`;
            } else {
                return `rgba(239, 68, 68, ${Math.abs(normalized)})`;
            }
        }

        function getBestAction(qValues) {
            const actions = ['up', 'down', 'left', 'right'];
            let bestAction = actions[0];
            let bestValue = qValues[bestAction] || 0;

            actions.forEach(action => {
                const value = qValues[action] || 0;
                if (value > bestValue) {
                    bestValue = value;
                    bestAction = action;
                }
            });

            return bestAction;
        }

        function highlightOptimalPath(path) {
            // Limpiar highlights anteriores
            document.querySelectorAll('.maze-cell').forEach(cell => {
                cell.classList.remove('bg-blue-400');
            });

            // Resaltar nueva ruta
            path.forEach(pos => {
                const cellDiv = document.getElementById(`cell-${pos[0]}-${pos[1]}`);
                if (cellDiv) {
                    cellDiv.classList.remove('bg-gray-600');
                    cellDiv.classList.add('bg-blue-400');
                }
            });
        }

        function initializeRewardChart() {
            const canvas = document.getElementById('rewardChart');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            
            rewardChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Recompensa por Episodio',
                        data: [],
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Promedio MÃ³vil (10 episodios)',
                        data: [],
                        borderColor: '#10b981',
                        backgroundColor: 'transparent',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#9ca3af'
                            },
                            grid: {
                                color: 'rgba(156, 163, 175, 0.2)'
                            }
                        },
                        y: {
                            ticks: {
                                color: '#9ca3af'
                            },
                            grid: {
                                color: 'rgba(156, 163, 175, 0.2)'
                            }
                        }
                    },
                    animation: {
                        duration: 0
                    }
                }
            });
        }

        function updateRewardChart(episode, reward) {
            if (!rewardChart) return;

            rewardChart.data.labels.push(episode);
            rewardChart.data.datasets[0].data.push(reward);

            const windowSize = 10;
            const recentRewards = rewardChart.data.datasets[0].data.slice(-windowSize);
            const movingAverage = recentRewards.reduce((a, b) => a + b, 0) / recentRewards.length;
            rewardChart.data.datasets[1].data.push(movingAverage);

            if (rewardChart.data.labels.length > 50) {
                rewardChart.data.labels.shift();
                rewardChart.data.datasets[0].data.shift();
                rewardChart.data.datasets[1].data.shift();
            }

            rewardChart.update('none');
        }

        // Event listeners para sliders
        function setupCharacteristicSliders() {
            const sliders = [
                { id: 'sepal-length-slider', valueId: 'sepal-length-value', key: 'sepalLength' },
                { id: 'sepal-width-slider', valueId: 'sepal-width-value', key: 'sepalWidth' },
                { id: 'petal-length-slider', valueId: 'petal-length-value', key: 'petalLength' },
                { id: 'petal-width-slider', valueId: 'petal-width-value', key: 'petalWidth' }
            ];

            sliders.forEach(slider => {
                const element = document.getElementById(slider.id);
                const valueElement = document.getElementById(slider.valueId);
                
                if (element && valueElement) {
                    element.addEventListener('input', function() {
                        const value = parseFloat(this.value);
                        valueElement.textContent = value.toFixed(1);
                        userCharacteristics[slider.key] = value;
                        updatePrediction();
                    });
                }
            });
        }

        function setupOriginalSliders() {
            const depthSlider = document.getElementById('depth-slider');
            const depthValue = document.getElementById('depth-value');
            
            if (depthSlider && depthValue) {
                depthSlider.addEventListener('input', function() {
                    depthValue.textContent = this.value;
                });
            }
        }

        function setupRLSliders() {
            const sliders = [
                { id: 'lr-slider', valueId: 'lr-value' },
                { id: 'df-slider', valueId: 'df-value' },
                { id: 'er-slider', valueId: 'er-value' }
            ];

            sliders.forEach(slider => {
                const element = document.getElementById(slider.id);
                const valueElement = document.getElementById(slider.valueId);
                
                if (element && valueElement) {
                    element.addEventListener('input', function() {
                        const value = parseFloat(this.value);
                        if (slider.id === 'er-slider') {
                            valueElement.textContent = value.toFixed(3);
                        } else {
                            valueElement.textContent = value.toFixed(2);
                        }
                    });
                }
            });
        }

        // Crear partÃ­culas de fondo
        function createParticles() {
            const container = document.getElementById('particles-container');
            
            setInterval(() => {
                if (container && container.children.length < 20) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.width = Math.random() * 4 + 2 + 'px';
                    particle.style.height = particle.style.width;
                    particle.style.animationDuration = (Math.random() * 3 + 5) + 's';
                    
                    container.appendChild(particle);
                    
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 8000);
                }
            }, 500);
        }

        function downloadFile(filename) {
            // Esta funciÃ³n simula la descarga - en un entorno real podrÃ­as servir los archivos
            alert(`Descarga simulada: ${filename}\n\nEn un entorno real, aquÃ­ se descargarÃ­a el archivo del servidor.`);
        }

        // InicializaciÃ³n
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar conexiÃ³n con servidor
            checkServerConnection();
            
            // Configurar sliders
            setupCharacteristicSliders();
            setupOriginalSliders();
            setupRLSliders();
            
            // Inicializar grÃ¡fico de recompensas
            initializeRewardChart();
            
            // Inicializar laberinto
            initializeMaze();
            
            // Crear partÃ­culas
            createParticles();
            
            // Inicializar iconos
            lucide.createIcons();
            
            // Verificar conexiÃ³n periÃ³dicamente
            setInterval(checkServerConnection, 30000); // Cada 30 segundos
        });
    </script>
</body>
</html>
